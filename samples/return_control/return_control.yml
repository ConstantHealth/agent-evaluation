evaluator:
  model: claude-3
target:
  type: bedrock-agent
  bedrock_agent_id: my-agent-id
  bedrock_agent_alias_id: my-alias-id
tests:
  weather_agent:
    max_turns: 5
    steps:
      - step: "Ask agent what the weather is in Seattle?"
        expected_invocation:
          apiInvocationInput:
            actionGroup: "WeatherAPIs"
            apiPath: "/get-weather"
            httpMethod: "GET"
            parameters:
              - name: "location"
                type: "string"
                value: "Ottawa"
              - name: "date"
                type: "string"
                value: "2024-09-15"
          invocation_response_file: "samples/return_control/responses/weather_ottawa.json"
        expected_outcome: "The agent provides weather information for Ottawa"

      - step: "Now ask about the weather in Toronto"
        expected_invocation:
          functionInvocationInput:
            actionGroup: "WeatherAPIs"
            function: "get_weather"
            parameters:
              - name: "city"
                type: "string"
                value: "Toronto"
              - name: "country"
                type: "string"
                value: "CA"
          invocation_response_file: "samples/return_control/responses/weather_toronto.json"
        expected_outcome: "The agent provides weather information for Toronto"

    expected_results:
      - "The agent provides weather information for Ottawa"
      - "The agent provides weather information for Toronto"
